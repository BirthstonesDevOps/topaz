<div class="status-note-timeline">
    <p-timeline 
      [value]="timelineEvents" 
      align="alternate" 
      styleClass="customized-timeline">
      
      <ng-template #marker let-event>
        <span 
          class="flex w-8 h-8 items-center justify-center text-white rounded-full z-10 shadow-sm" 
          [style]="{ 'background-color': event.statusColor }">
          <i [class]="event.statusIcon"></i>
        </span>
      </ng-template>
      
      <ng-template #content let-event>
        <p-card 
          [header]="getStatusDisplayName(event.status)"
          [subheader]="formatDate(event.createdAt)">
          
          <!-- Status Tag -->
          <div class="mb-4" *ngIf="event.status">
            <p-tag 
              [value]="event.status.status || 'Unknown'"
              [severity]="event.statusSeverity"
              class="text-sm">
            </p-tag>
          </div>
          
          <!-- Notes Section -->
          <div *ngIf="event.notes && event.notes.length > 0" class="notes-section">
            <h4 class="text-lg font-semibold mb-3 text-gray-700">Notes</h4>
            <div class="space-y-3">
              <div 
                *ngFor="let note of event.notes; trackBy: trackByNoteId"
                class="note-item p-3 bg-gray-50 rounded-lg border-l-4 border-blue-200">
                <p class="text-gray-800 mb-2">{{ note.note || 'No note content' }}</p>
                <small class="text-gray-500">
                  {{ formatDate(note.createdAt) }}
                </small>
              </div>
            </div>
          </div>
          
          <!-- No Notes Message -->
          <div *ngIf="!event.notes || event.notes.length === 0" class="no-notes">
            <p class="text-gray-500 italic">No notes available for this status</p>
          </div>
          
        </p-card>
      </ng-template>
      
    </p-timeline>
    
    <!-- Empty State -->
    <div *ngIf="!timelineEvents || timelineEvents.length === 0" class="empty-state text-center py-8">
      <i class="pi pi-clock text-4xl text-gray-400 mb-4"></i>
      <p class="text-gray-500 text-lg">No status history available</p>
    </div>
  </div>